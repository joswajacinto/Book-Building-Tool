{"ast":null,"code":"var cheerio = require(\"cheerio\");\n\nexport function convertWileyDummyBook(content) {\n  // the book is wiley\n  var $ = cheerio.load(content);\n\n  function capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  function wrapHtmlTag(item, wrapWith) {\n    $(item).wrap(wrapWith).html();\n  }\n\n  function wrapHtmlPrent(item, wrapWith) {\n    $(item).parent().wrap(wrapWith).html();\n  }\n\n  function removeWrap(item) {\n    $(item).each(function () {\n      $(this).replaceWith($(this).html());\n    });\n  }\n\n  function checkTipValue(type) {\n    if (type === \"remember\") {\n      return \"note\";\n    } else if (type === \"techstuff\") {\n      return \"attention\";\n    } else {\n      return type;\n    }\n  }\n\n  function wrapAttentionStyle(type) {\n    wrapHtmlTag(\"\".concat(type, \" p\"), \"<div class='body'></div>\");\n    wrapHtmlTag(type, \"<div class='box \".concat(checkTipValue(type), \"'></div>\"));\n    $(type).prepend(\"<h4>\".concat(capitalizeFirstLetter(type === \"techstuff\" ? \"Technical Stuff\" : type), \"</h4>\")); // remove placeholder tag\n\n    removeWrap(type);\n  } // Change <b> tags to <strong>\n\n\n  $(\"b\").each(function (i, item) {\n    return item.tagName = \"strong\";\n  }); // Change <i> tags to <em>\n\n  $(\"i\").each(function (i, item) {\n    return item.tagName = \"em\";\n  }); // add temporary tags for attention sections\n\n  wrapHtmlPrent(\"img[alt=remember]\", \"<remember></remember>\");\n  wrapHtmlPrent(\"img[alt=warning]\", \"<warning></warning>\");\n  wrapHtmlPrent(\"img[alt=tip]\", \"<tip></tip>\");\n  wrapHtmlPrent(\"img[alt=technicalstuff]\", \"<techstuff></techstuff>\"); // remove images for icons\n\n  removeWrap(\"img[alt=remember]\");\n  removeWrap(\"img[alt=warning]\");\n  removeWrap(\"img[alt=tip]\");\n  removeWrap(\"img[alt=technicalstuff]\"); // remove div.figure\n\n  removeWrap(\"div.figure\"); // change p.code to pre tag\n\n  $(\"p.code\").each(function (i, item) {\n    return item.tagName = \"pre\";\n  });\n  $(\"p.code1\").each(function (i, item) {\n    return item.tagName = \"pre\";\n  }); // convert sidebar to blockquote\n\n  $(\"div.sidebar\").each(function (i, item) {\n    return item.tagName = \"blockquote\";\n  }); // convert code inside paragraph to kbd\n\n  $(\"p code\").each(function (i, item) {\n    return item.tagName = \"kbd\";\n  }); // Clear classes of all html element\n\n  $(\"*\").removeAttr(\"class\").html();\n  $(\"*\").removeAttr(\"id\").html();\n  $(\"*\").removeAttr(\"title\").html();\n  removeWrap(\"a[href*='#calibre_link-']\");\n  removeWrap(\"div\");\n  removeWrap(\"article\");\n  removeWrap(\"aside\");\n  removeWrap(\"header\");\n  removeWrap(\"span\");\n  removeWrap(\"p span\");\n  removeWrap(\"section\");\n  removeWrap(\"div section\"); // Clean up <pre> tag from br and strong tags\n\n  removeWrap(\"pre span\");\n  removeWrap(\"pre strong\");\n  $(\"code br\").each(function () {\n    $(this).replaceWith(\"\\n\");\n  });\n  $(\"pre br\").each(function () {\n    $(this).replaceWith(\"\\n\");\n  }); // update figure and figcaption to proper styling\n\n  $(\"figcaption p\").addClass(\"f-center\");\n  removeWrap(\"figure\");\n  removeWrap(\"figcaption\"); // Add p tag to all images with image-wrapper class\n\n  var imgStyle = $('<p class=\"image-wrapper\"></p>');\n  $(\"img\").wrap(imgStyle); // Update image class to lazyload\n\n  $(\"img\").removeClass().html();\n  $(\"img\").addClass(\"lazyload\"); // Add styling to tip\n\n  wrapAttentionStyle(\"remember\");\n  wrapAttentionStyle(\"tip\");\n  wrapAttentionStyle(\"warning\");\n  wrapAttentionStyle(\"techstuff\"); // Add style on center p\n\n  $(\"centertext\").addClass(\"f-center\");\n  $(\"centertext\").each(function (i, item) {\n    return item.tagName = \"p\";\n  });\n  var cleanHTML = $.html();\n  return cleanHTML;\n}","map":{"version":3,"sources":["/Users/sitepoint/Sitepoint_tool/Book-Building-Tool/src/helper/wiley_dummy.js"],"names":["cheerio","require","convertWileyDummyBook","content","$","load","capitalizeFirstLetter","string","charAt","toUpperCase","slice","wrapHtmlTag","item","wrapWith","wrap","html","wrapHtmlPrent","parent","removeWrap","each","replaceWith","checkTipValue","type","wrapAttentionStyle","prepend","i","tagName","removeAttr","addClass","imgStyle","removeClass","cleanHTML"],"mappings":"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","sourcesContent":["const cheerio = require(\"cheerio\");\n\nexport function convertWileyDummyBook(content) {\n  // the book is wiley\n  const $ = cheerio.load(content);\n\n  function capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  function wrapHtmlTag(item, wrapWith) {\n    $(item)\n      .wrap(wrapWith)\n      .html();\n  }\n\n  function wrapHtmlPrent(item, wrapWith) {\n    $(item)\n      .parent()\n      .wrap(wrapWith)\n      .html();\n  }\n\n  function removeWrap(item) {\n    $(item).each(function() {\n      $(this).replaceWith($(this).html());\n    });\n  }\n\n  function checkTipValue(type) {\n    if (type === \"remember\") {\n      return \"note\";\n    } else if (type === \"techstuff\") {\n      return \"attention\";\n    } else {\n      return type;\n    }\n  }\n\n  function wrapAttentionStyle(type) {\n    wrapHtmlTag(`${type} p`, \"<div class='body'></div>\");\n    wrapHtmlTag(type, `<div class='box ${checkTipValue(type)}'></div>`);\n    $(type).prepend(\n      `<h4>${capitalizeFirstLetter(\n        type === \"techstuff\" ? \"Technical Stuff\" : type\n      )}</h4>`\n    );\n\n    // remove placeholder tag\n    removeWrap(type);\n  }\n\n  // Change <b> tags to <strong>\n\n  $(\"b\").each((i, item) => (item.tagName = \"strong\"));\n\n  // Change <i> tags to <em>\n\n  $(\"i\").each((i, item) => (item.tagName = \"em\"));\n\n  // add temporary tags for attention sections\n\n  wrapHtmlPrent(\"img[alt=remember]\", \"<remember></remember>\");\n  wrapHtmlPrent(\"img[alt=warning]\", \"<warning></warning>\");\n  wrapHtmlPrent(\"img[alt=tip]\", \"<tip></tip>\");\n  wrapHtmlPrent(\"img[alt=technicalstuff]\", \"<techstuff></techstuff>\");\n\n  // remove images for icons\n  removeWrap(\"img[alt=remember]\");\n  removeWrap(\"img[alt=warning]\");\n  removeWrap(\"img[alt=tip]\");\n  removeWrap(\"img[alt=technicalstuff]\");\n\n  // remove div.figure\n  removeWrap(\"div.figure\");\n\n  // change p.code to pre tag\n  $(\"p.code\").each((i, item) => (item.tagName = \"pre\"));\n  $(\"p.code1\").each((i, item) => (item.tagName = \"pre\"));\n\n  // convert sidebar to blockquote\n  $(\"div.sidebar\").each((i, item) => (item.tagName = \"blockquote\"));\n\n  // convert code inside paragraph to kbd\n  $(\"p code\").each((i, item) => (item.tagName = \"kbd\"));\n\n  // Clear classes of all html element\n\n  $(\"*\")\n    .removeAttr(\"class\")\n    .html();\n\n  $(\"*\")\n    .removeAttr(\"id\")\n    .html();\n\n  $(\"*\")\n    .removeAttr(\"title\")\n    .html();\n  removeWrap(\"a[href*='#calibre_link-']\");\n\n  removeWrap(\"div\");\n  removeWrap(\"article\");\n  removeWrap(\"aside\");\n  removeWrap(\"header\");\n  removeWrap(\"span\");\n  removeWrap(\"p span\");\n  removeWrap(\"section\");\n  removeWrap(\"div section\");\n  // Clean up <pre> tag from br and strong tags\n\n  removeWrap(\"pre span\");\n\n  removeWrap(\"pre strong\");\n\n  $(\"code br\").each(function() {\n    $(this).replaceWith(\"\\n\");\n  });\n\n  $(\"pre br\").each(function() {\n    $(this).replaceWith(\"\\n\");\n  });\n\n  // update figure and figcaption to proper styling\n\n  $(\"figcaption p\").addClass(\"f-center\");\n  removeWrap(\"figure\");\n  removeWrap(\"figcaption\");\n  // Add p tag to all images with image-wrapper class\n\n  const imgStyle = $('<p class=\"image-wrapper\"></p>');\n  $(\"img\").wrap(imgStyle);\n\n  // Update image class to lazyload\n\n  $(\"img\")\n    .removeClass()\n    .html();\n\n  $(\"img\").addClass(\"lazyload\");\n\n  // Add styling to tip\n  wrapAttentionStyle(\"remember\");\n  wrapAttentionStyle(\"tip\");\n  wrapAttentionStyle(\"warning\");\n  wrapAttentionStyle(\"techstuff\");\n\n  // Add style on center p\n  $(\"centertext\").addClass(\"f-center\");\n  $(\"centertext\").each((i, item) => (item.tagName = \"p\"));\n\n  const cleanHTML = $.html();\n\n  return cleanHTML;\n}\n"]},"metadata":{},"sourceType":"module"}